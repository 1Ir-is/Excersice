<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quan Ly San Pham</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .container {
        width: 50%;
        margin: auto;
      }
      h2 {
        margin-bottom: 10px;
      }
      input {
        width: 70%;
        padding: 8px;
        margin-right: 10px;
      }
      button {
        padding: 8px 15px;
        border: none;
        cursor: pointer;
        font-size: 14px;
      }
      .add-btn {
        background-color: #50af50;
        color: white;
        padding: 10px 25px;
        border: none;
        border-radius: 7px;
      }

      input[type="text"] {
        border: 1px solid #ccc;
        padding: 10px;
        border-radius: 5px;
      }

      .add-product {
        background-color: #f2f2f2;
        padding: 30px;
        text-align: center;
      }
      .edit-btn,
      .delete-btn {
        background-color: #50af50;
        color: white;
        padding: 10px 25px;
        border: none;
        border-radius: 7px;
        margin: 3px;
      }
      .delete-btn {
        background-color: red;
      }
      .table-container {
        margin-top: 20px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
      }
      th {
        background-color: #f4f4f4;
      }
      .product-count {
        color: red;
        font-weight: bold;
      }

      .product-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Add New Product</h2>
      <section class="add-product">
        <input type="text" id="productInput" placeholder="New Product" />
        <button class="add-btn" onclick="addProduct()">Add</button>
      </section>

      <div class="table-container">
        <div class="product-header">
          <h2>Display All Product</h2>
          <p><span class="product-count" id="productCount">0</span> products</p>
        </div>

        <table>
          <thead>
            <tr>
              <th>Product Name</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="productTable"></tbody>
        </table>
      </div>
    </div>

    <script>
      let products = [
        "Sony Xperia",
        "Samsung Galaxy",
        "Nokia 6",
        "iPhone 6S",
        "Xiaomi Redmi Note 4",
        "OnePlus 7T",
        "Oppo A71",
        "Fujitsu F-04E",
      ];

      function displayProducts() {
        const productTable = document.getElementById("productTable");
        productTable.innerHTML = "";
        for (let i = 0; i < products.length; i++) {
          productTable.innerHTML += `
                    <tr>
                        <td>${products[i]}</td>
                        <td>
                            <button class="edit-btn" onclick="editProduct(${i})">Edit</button>
                            <button class="delete-btn" onclick="deleteProduct(${i})">Delete</button>
                        </td>
                    </tr>
                `;
        }
        document.getElementById("productCount").innerText = products.length;
      }

      function addProduct() {
        const productInput = document.getElementById("productInput").value;
        if (productInput) {
          products.push(productInput);
          document.getElementById("productInput").value = "";
          displayProducts();
        } else {
          alert("Please enter a product name");
        }
      }

      function deleteProduct(index) {
        const confirmDelete = confirm(
          "Are you sure you want to delete this product?"
        );
        if (confirmDelete) {
          products.splice(index, 1);
          alert("Product deleted successfully!");
          displayProducts();
        }
      }

      function editProduct(index) {
        const oldName = products[index];
        let newName = prompt("Enter new name for the product:", oldName);

        // Kiểm tra nếu người dùng nhấn Cancel hoặc nhập rỗng
        if (newName === null) return; // Nhấn hủy thì không làm gì cả
        newName = newName.trim(); // Xóa khoảng trắng hai đầu

        if (newName === "") {
          alert("Product name cannot be empty!");
          return;
        }

        if (newName === oldName) {
          alert("New name cannot be the same as the old name!");
          return;
        }

        products[index] = newName;
        alert("Edit Success!");
        displayProducts();
      }

      displayProducts();
    </script>
  </body>
</html>
